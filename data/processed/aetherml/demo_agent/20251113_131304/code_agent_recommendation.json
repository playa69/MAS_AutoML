{
  "manifest": {
    "dataset_id": "demo_agent",
    "source_url": "file:///Users/sergeykudriashov/itmo_autods/MAS_AutoML/data/amlb/demo_agent/data.csv",
    "commit": null,
    "local_path": "/Users/sergeykudriashov/itmo_autods/MAS_AutoML/data/amlb/demo_agent/data.csv",
    "shape": [
      500,
      7
    ],
    "target_column": "target"
  },
  "validation_report": {
    "dataset": {
      "rows": 500,
      "cols": 7,
      "target": "target",
      "task_type": "classification",
      "duplicates": 0
    },
    "feature_types": {
      "numeric": [
        "x1",
        "x2"
      ],
      "categorical": [
        "cat",
        "user_id",
        "timestamp"
      ],
      "datetime": [
        "timestamp"
      ],
      "text": [
        "text"
      ]
    },
    "missing_per_column": {
      "x1": 0.0,
      "x2": 0.1,
      "cat": 0.0,
      "user_id": 0.0,
      "timestamp": 0.0,
      "text": 0.0
    },
    "high_cardinality": [
      "user_id",
      "timestamp"
    ],
    "temporal_columns": [
      "timestamp"
    ],
    "leakage_suspects": [],
    "warnings": {
      "high_missing_cols": [],
      "imbalance": null,
      "outliers": null
    },
    "created_at": "2025-11-13T13:13:04.477722+00:00",
    "source": {
      "dataset_id": "demo_agent",
      "source_url": "file:///Users/sergeykudriashov/itmo_autods/MAS_AutoML/data/amlb/demo_agent/data.csv",
      "commit": null,
      "local_path": "/Users/sergeykudriashov/itmo_autods/MAS_AutoML/data/amlb/demo_agent/data.csv",
      "shape": [
        500,
        7
      ],
      "target_column": "target"
    }
  },
  "metafeatures": {
    "dataset": {
      "id": "demo_agent",
      "n_rows": 500,
      "n_cols": 7,
      "feature_types": {
        "numeric": [
          "x1",
          "x2"
        ],
        "categorical": [
          "cat",
          "user_id",
          "timestamp"
        ],
        "datetime": [
          "timestamp"
        ],
        "text": [
          "text"
        ]
      },
      "missing_rate": 0.014285714285714285,
      "class_balance": {
        "0": 0.908,
        "1": 0.092
      },
      "y_stats": null,
      "correlations": {
        "num_numeric": 2,
        "high_corr_pairs": []
      }
    },
    "features": {
      "x1": {
        "dtype": "float64",
        "n_unique": 500,
        "missing_rate": 0.0,
        "entropy": 3.9998622297342523,
        "skewness": 0.09368996650236439,
        "kurtosis": -0.04007323067648505
      },
      "x2": {
        "dtype": "float64",
        "n_unique": 450,
        "missing_rate": 0.1,
        "entropy": 3.999901130852637,
        "skewness": -0.1605612524999914,
        "kurtosis": 0.22475680090631167
      },
      "cat": {
        "dtype": "object",
        "n_unique": 3,
        "missing_rate": 0.0,
        "entropy": 1.4792234173536958,
        "skewness": null,
        "kurtosis": null
      },
      "user_id": {
        "dtype": "object",
        "n_unique": 500,
        "missing_rate": 0.0,
        "entropy": 8.965784284662087,
        "skewness": null,
        "kurtosis": null
      },
      "timestamp": {
        "dtype": "object",
        "n_unique": 500,
        "missing_rate": 0.0,
        "entropy": 8.965784284662087,
        "skewness": null,
        "kurtosis": null
      },
      "text": {
        "dtype": "object",
        "n_unique": 500,
        "missing_rate": 0.0,
        "entropy": 8.965784284662087,
        "skewness": null,
        "kurtosis": null
      }
    },
    "created_at": "2025-11-13T13:13:04.486292+00:00"
  },
  "preprocessing_recipe": {
    "summary": "Median impute and scale numerics; impute categoricals; one-hot low-cardinality and target-encode high-cardinality; add basic datetime features if present.",
    "priority": "must",
    "steps": [
      {
        "id": "s1_detect",
        "action": "detect_types",
        "tool": "pandas",
        "params": {
          "infer_datetime": true
        },
        "example_code": "df.dtypes.to_dict()"
      },
      {
        "id": "s2_impute_numeric",
        "action": "impute",
        "tool": "sklearn",
        "params": {
          "col_selector": "numeric",
          "strategy": "median"
        },
        "example_code": "SimpleImputer(strategy='median')"
      },
      {
        "id": "s4_scale",
        "action": "scale",
        "tool": "sklearn",
        "params": {
          "col_selector": "numeric",
          "method": "StandardScaler"
        },
        "example_code": "StandardScaler()"
      },
      {
        "id": "s3_impute_categorical",
        "action": "impute",
        "tool": "sklearn",
        "params": {
          "col_selector": "categorical",
          "strategy": "most_frequent"
        },
        "example_code": "SimpleImputer(strategy='most_frequent')"
      },
      {
        "id": "s3_encode",
        "action": "encode",
        "tool": "category_encoders",
        "params": {
          "col_selector": "categorical",
          "method_by_cardinality": {
            "low": "onehot",
            "high": "target_encoder"
          },
          "high_cardinality_cols": [
            "user_id",
            "timestamp",
            "text"
          ]
        },
        "example_code": "TargetEncoder(cols=high_card_cols)"
      }
    ],
    "example_pipeline_snippet": "from sklearn.pipeline import Pipeline\nfrom sklearn.compose import ColumnTransformer\nfrom sklearn.impute import SimpleImputer\nfrom sklearn.preprocessing import StandardScaler, OneHotEncoder\nfrom category_encoders import TargetEncoder\nnumeric_cols = [\"x1\", \"x2\"]\ncategorical_cols = [\"cat\", \"user_id\", \"timestamp\", \"text\"]\nhigh_card_cols = [\"user_id\", \"timestamp\", \"text\"]\nlow_card_cols = [c for c in categorical_cols if c not in high_card_cols]\nnum_pipe = Pipeline([('impute', SimpleImputer(strategy='median')), ('scale', StandardScaler())])\nlow_cat_pipe = Pipeline([('impute', SimpleImputer(strategy='most_frequent')), ('encode', OneHotEncoder(handle_unknown='ignore', sparse_output=False))])\nhigh_cat_pipe = Pipeline([('impute', SimpleImputer(strategy='most_frequent')), ('encode', TargetEncoder(cols=high_card_cols))])\npreproc = ColumnTransformer([\n    ('num', num_pipe, numeric_cols),\n    ('low_cat', low_cat_pipe, low_card_cols),\n    ('high_cat', high_cat_pipe, high_card_cols),\n])",
    "frameworks_recommended": [
      "pandas",
      "scikit-learn",
      "category_encoders",
      "mlflow"
    ],
    "rationale": "Rules selected to stabilize training and control dimensionality while preserving signal. Temporal features are expanded when datetime columns exist to capture seasonality.",
    "estimated_complexity": "medium",
    "confidence": 0.9,
    "task_type": "classification",
    "numeric_columns": [
      "x1",
      "x2"
    ],
    "categorical_columns": [
      "cat",
      "user_id",
      "timestamp"
    ],
    "datetime_columns": [
      "timestamp"
    ],
    "text_columns": [
      "text"
    ],
    "high_cardinality_cols": [
      "user_id",
      "timestamp"
    ],
    "low_card_cols": [
      "cat"
    ],
    "recommended_split": "stratified"
  },
  "code_agent_recommendation": {
    "summary": "See preprocessing_recipe. Use provided steps/columns; fall back to conservative pipeline if confidence < 0.7.",
    "recommended_artifacts": {
      "preprocessing_recipe_key": "preprocessing_recipe",
      "validation_report_key": "validation_report",
      "metafeatures_key": "metafeatures",
      "manifest_key": "manifest"
    }
  },
  "run_metadata": {
    "run_id": "7d611015dac54937b6341f9a306bf3ca",
    "artifact_uri": "file:///Users/sergeykudriashov/itmo_autods/MAS_AutoML/mlruns/0/7d611015dac54937b6341f9a306bf3ca/artifacts",
    "start_time": "2025-11-13T13:13:05.011858+00:00",
    "end_time": "2025-11-13T13:13:05.013077+00:00",
    "status": "FINISHED",
    "dataset_id": "demo_agent",
    "validation_report_url": "file:///Users/sergeykudriashov/itmo_autods/MAS_AutoML/data/processed/aetherml/demo_agent/20251113_131304/validation_report.json",
    "metafeatures_url": "file:///Users/sergeykudriashov/itmo_autods/MAS_AutoML/data/processed/aetherml/demo_agent/20251113_131304/metafeatures.json",
    "preprocessing_recipe_url": "file:///Users/sergeykudriashov/itmo_autods/MAS_AutoML/data/processed/aetherml/demo_agent/20251113_131304/preprocessing_recipe.json",
    "generated_by": "data_agent_v0.2"
  }
}